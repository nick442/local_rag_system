You only have to hold the shares at the opening of the ex-dividend date to get the dividends. So you can actually sell the shares on ex-dividend date and still get the dividends. Ex-dividend date occurs before the record date and payment date, so you will get the dividend even if you sold before the record date.