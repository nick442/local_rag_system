You may refer to project http://jstock.sourceforge.net. It is open source and released under GPL. It is fetching data from Yahoo! Finance, include delayed current price and historical price.