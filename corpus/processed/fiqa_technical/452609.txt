In the first case that isn't a good example, in fact its contrary. We're talking about people earning under 5 million voting against taxing the very rich. It is in their interest directly. In the second case, civil rights aren't a zero sum game but it also isn't a case of voting against their own interests, just not necessarily directly for their own interests. All these are at best loose correlations like identity politics and not very concrete like in the case of healthcare. People figure it out slowly but they do figure it out.