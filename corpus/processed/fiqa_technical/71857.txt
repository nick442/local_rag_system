Say there are 5 people took loan of $100000 each. Those 5 people work in different jobs and have different capacity to payoff loan. Someone earning $40000 a year has higher risk to default on their payment then someone making $250000 a year. As Bank wants to sell this CDO to investor but how would investor know what the risk factor for this CDO is. This is where rating agency comes in picture. They apparently look at the underlying asset and assign rating to this CDO say AAA, B, AA etc which give investor idea of underlying risk. Problem here is rating agency gets paid by Bank to rate their CDO. So if a rating agency starts rating their CDO to higher risk Bank will go to next agency round the corner to get better rating and agency will lose commission. You can see the problem here. Now if people start struggling to pay loan, bank will not get money and it cannot pay CDO holders. If house that was worth $100000 when CDO was created is devalued to say $50000 today the underlying asset is not worth as much when CDO was sold. That is what happened when market crashed in 2008 and GFC hit.