This is basically a form of credit card kiting, it's not necessarily illegal but it can be. It is, however, against the TOS in pretty much every merchant agreement (including Paypal and Square), so you'd most likely have your account suspended, and the merchant could pursue legal action if they felt they could prove intent to deceive. It's not practical given actual fee structures, but even if it were, most merchants are quite good at detecting this sort of thing and quick to shut down accounts.