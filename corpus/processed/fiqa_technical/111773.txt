There are different types of agreements. Sometimes an underwriter will simply try to find buyers. Other times an underwriter will guarantee that all shares will be sold at some price. If this is the case and they do not find enough buyers, the underwriter will buy the remaining shares.