As littleadv suggested, you are mixing issues. If you have earned income and are able to deduct an IRA deposit, where those actual dollars came from is irrelevant. The fact that you are taking proceeds from one transaction to deposit to the IRA is a booking entry on your side, but the IRS doesn't care. By the way, when you get that $1000 gain, the broker doesn't withhold tax, so if you take the entire $1000 and put it in the IRA, you owe $150 on one line, but save $250 elsewhere, and are still $100 to the positive on your tax return.