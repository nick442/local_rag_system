"Answering this question is weird, because it is not really precise in what you mean. Do you want all stocks in the US? Do you want a selection of stocks according to parameters? Do you just want a cool looking graph? However, your possible misuse of the word derivative piqued my interest. Your reference to gold and silver seems to indicate that you do not know what a derivative actually is. Or what it would do in a portfolio. The straightforward way to ""see"" an efficient frontier is to do the following. For a set of stocks (in this case six ""randomly"" selected ones): library(quantmod) library(fPortfolio) library(PerformanceAnalytics) getSymbols(c(""STZ"", ""RAI"", ""AMZN"", ""MSFT"", ""TWX"", ""RHT""), from = ""2012-06-01"", to = ""2017-06-01"") returns <- NULL tickerlist <- c(""STZ"", ""RAI"", ""AMZN"", ""MSFT"", ""TWX"", ""RHT"") for (ticker in tickerlist){ returns <- cbind(returns, monthlyReturn(Ad(eval(as.symbol(ticker))))) } colnames(returns) <- tickerlist returns <- as.timeSeries(returns) frontier <- portfolioFrontier(returns) png(""frontier.png"", width = 800, height = 600) plot(frontier, which = ""all"") dev.off() minvariancePortfolio(returns, constraints = ""LongOnly"") Portfolio Weights: STZ RAI AMZN MSFT TWX RHT 0.1140 0.3912 0.0000 0.1421 0.1476 0.2051 Covariance Risk Budgets: STZ RAI AMZN MSFT TWX RHT 0.1140 0.3912 0.0000 0.1421 0.1476 0.2051 Target Returns and Risks: mean Cov CVaR VaR 0.0232 0.0354 0.0455 0.0360 https://imgur.com/QIxDdEI The minimum variance portfolio of these six assets has a mean return is 0.0232 and variance is 0.0360. AMZN does not get any weight in the portfolio. It kind of means that the other assets span it and it does not provide any additional diversification benefit. Let us add two ETFs that track gold and silver to the mix, and see how little difference it makes: getSymbols(c(""GLD"", ""SLV""), from = ""2012-06-01"", to = ""2017-06-01"") returns <- NULL tickerlist <- c(""STZ"", ""RAI"", ""AMZN"", ""MSFT"", ""TWX"", ""RHT"", ""GLD"", ""SLV"") for (ticker in tickerlist){ returns <- cbind(returns, monthlyReturn(Ad(eval(as.symbol(ticker))))) } colnames(returns) <- tickerlist returns <- as.timeSeries(returns) frontier <- portfolioFrontier(returns) png(""weights.png"", width = 800, height = 600) weightsPlot(frontier) dev.off() # Optimal weights out <- minvariancePortfolio(returns, constraints = ""LongOnly"") wghts <- getWeights(out) portret1 <- returns%*%wghts portret1 <- cbind(monthprc, portret1)[,3] colnames(portret1) <- ""Optimal portfolio"" # Equal weights wghts <- rep(1/8, 8) portret2 <- returns%*%wghts portret2 <- cbind(monthprc, portret2)[,3] colnames(portret2) <- ""Equal weights portfolio"" png(""performance_both.png"", width = 800, height = 600) par(mfrow=c(2,2)) chart.CumReturns(portret1, ylim = c(0, 2)) chart.CumReturns(portret2, ylim = c(0, 2)) chart.Drawdown(portret1, main = ""Drawdown"", ylim = c(-0.06, 0)) chart.Drawdown(portret2, main = ""Drawdown"", ylim = c(-0.06, 0)) dev.off() https://imgur.com/sBHGz7s Adding gold changes the minimum variance mean return to 0.0116 and the variance stays about the same 0.0332. You can see how the weights change at different return and variance profiles in the picture. The takeaway is that adding gold decreases the return but does not do a lot for the risk of the portfolio. You also notice that silver does not get included in the minimum variance efficient portfolio (and neither does AMZN). https://imgur.com/rXPbXau We can also compare the optimal weights to an equally weighted portfolio and see that the latter would have performed better but had much larger drawdowns. Which is because it has a higher volatility, which might be undesirable. --- Everything below here is false, but illustrative. So what about the derivative part? Let us assume you bought an out of the money call option with a strike of 50 on MSFT at the beginning of the time series and held it to the end. We need to decide on the the annualized cost-of-carry rate, the annualized rate of interest, the time to maturity is measured in years, the annualized volatility of the underlying security is proxied by the historical volatility. library(fOptions) monthprc <- Ad(MSFT)[endpoints(MSFT, ""months"")] T <- length(monthprc) # 60 months, 5 years vol <- sd(returns$MSFT)*sqrt(12) # annualized volatility optprc <- matrix(NA, 60, 1) for (t in 1:60) { s <- as.numeric(monthprc[t]) optval <- GBSOption(TypeFlag = ""c"", S = s, X = 50, Time = (T - t) / 12, r = 0.001, b = 0.001, sigma = vol) optprc[t] <- optval@price } monthprc <- cbind(monthprc, optprc) colnames(monthprc) <- c(""MSFT"", ""MSFTCall50"") MSFTCall50rets <- monthlyReturn(monthprc[,2]) colnames(MSFTCall50rets) <- ""MSFTCall50rets"" returns <- merge(returns, MSFTCall50rets) wghts <- rep(1/9, 9) portret3 <- returns%*%wghts portret3 <- cbind(monthprc, portret3)[,3] colnames(portret3) <- ""Equal weights derivative portfolio"" png(""performance_deriv.png"", width = 800, height = 600) par(mfrow=c(2,2)) chart.CumReturns(portret2, ylim = c(0, 4.5)) chart.CumReturns(portret3, ylim = c(0, 4.5)) chart.Drawdown(portret2, main = ""Drawdown"", ylim = c(-0.09, 0)) chart.Drawdown(portret3, main = ""Drawdown"", ylim = c(-0.09, 0)) dev.off() https://imgur.com/SZ1xrYx Even though we have a massively profitable instrument in the derivative. The portfolio analysis does not include it because of the high volatility. However, if we just use equal weighting and essentially take a massive position in the out of the money call (which would not be possible in real life), we get huge drawdowns and volatility, but the returns are almost two fold. But nobody will sell you a five year call. Others can correct any mistakes or misunderstandings in the above. It hopefully gives a starting point. Read more at: https://en.wikipedia.org/wiki/Modern_portfolio_theory https://en.wikipedia.org/wiki/Option_(finance) The imgur album: https://imgur.com/a/LoBEY"